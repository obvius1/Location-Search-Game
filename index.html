<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jet Lag The Game Ripoff maar dan anders</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Location-based game in Gent - Jet Lag style">
    <meta name="theme-color" content="#2563eb">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Jet Lag Game">
    
    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Map Section - Fullscreen -->
    <div id="map"></div>
    
    <!-- Bottom Controls Sheet -->
    <div id="controls-container" class="hidden">
        <div class="controls-handle" id="controls-handle">
            <div class="handle-bar"></div>
            <div class="handle-title">Controls</div>
        </div>
        <div class="controls-content" id="controls-content">
            <!-- Game Setup Section -->
            <section id="setup-section" class="card">
                <h2>üé≤ Spel Starten</h2>
                <div class="input-group">
                    <label for="seed-input">Spel Code (seed):</label>
                    <input type="text" id="seed-input" placeholder="Voer code in of genereer...">
                    <button id="generate-seed-btn" class="btn btn-secondary">Genereer Code</button>
                </div>
                <button id="start-game-btn" class="btn btn-primary">Start Spel</button>
            </section>

            <!-- Location Check Section -->
            <section id="location-section" class="card hidden">
                <h2>üìç Locatie Instellen</h2>
                <div class="status-indicator" id="location-status">
                    <span class="status-icon">‚è≥</span>
                    <span class="status-text">Wacht op locatie...</span>
                </div>
                <button id="get-gps-btn" class="btn btn-primary">Haal GPS Locatie Op</button>
                <div id="adjust-location-container" class="hidden">
                    <p class="info-text">üìç Versleep de <strong style="color: #22c55e;">groene marker</strong> op de kaart naar je exacte locatie</p>
                    <button id="confirm-location-btn" class="btn btn-success">Bevestig Locatie</button>
                </div>
                <div id="location-result" class="result-box hidden"></div>
            </section>

            <!-- Questions Section -->
            <section id="questions-section" class="card hidden">
                <h2>‚ùì Automatische Antwoorden</h2>
                <div id="questions-result" class="questions-list"></div>
            </section>

            <!-- Cards Section -->
            <section id="cards-section" class="card hidden">
                <h2>üÉè Speelkaarten</h2>
                <div class="card-counter">
                    <span>Kaart <span id="current-card-number">1</span> van <span id="total-cards">10</span></span>
                </div>
                <div id="current-card" class="game-card">
                    <div class="card-task"></div>
                    <div class="card-question"></div>
                </div>
                <div class="card-actions">
                    <button id="prev-card-btn" class="btn btn-secondary">‚Üê Vorige</button>
                    <button id="next-card-btn" class="btn btn-secondary">Volgende ‚Üí</button>
                </div>
            </section>

            <!-- Game Info -->
            <section class="card info-section">
                <h3>‚ÑπÔ∏è Spelinfo</h3>
                <p><strong>Speelveld:</strong> 3km rondom het Belfort van Gent</p>
                <p><strong>Seed:</strong> <span id="current-seed">-</span></p>
                <button id="copy-seed-btn" class="btn btn-secondary btn-small hidden">üìã Kopieer Code</button>
                <button id="reset-game-btn" class="btn btn-danger btn-small hidden" style="margin-top: 8px;">ÔøΩÔ∏è Verwijder Spel</button>
            </section>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="storage.js"></script>
    <script src="geoUtils.js"></script>
    <script src="cards.js"></script>
    <script src="app.js"></script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
